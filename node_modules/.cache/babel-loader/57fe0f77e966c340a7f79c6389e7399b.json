{"ast":null,"code":"import _slicedToArray from\"C:\\\\Complete Web Devlopment Batch 2\\\\projects\\\\red-onion-restaurant\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import'./Login.css';import{useForm}from'react-hook-form';import{Link,useHistory,useLocation}from'react-router-dom';import*as firebase from\"firebase/app\";import\"firebase/auth\";import firebaseConfig from'./firebaseConfig';import{useContext}from'react';import{UserContext}from'../../App';var Login=function Login(){var _useContext=useContext(UserContext),_useContext2=_slicedToArray(_useContext,2),loggedInUser=_useContext2[0],setLoggedInUser=_useContext2[1];var _useState=useState({isSiggnedIn:false,name:'',email:'',photo:''}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var history=useHistory();var location=useLocation();var _ref=location.state||{from:{pathname:\"/\"}},from=_ref.from;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),newUser=_useState4[0],setNewUser=_useState4[1];if(firebase.apps.length===0){firebase.initializeApp(firebaseConfig);}var onSubmit=function onSubmit(data){console.log(data);};var googleSingIn=function googleSingIn(){var googleProvider=new firebase.auth.GoogleAuthProvider();firebase.auth().signInWithPopup(googleProvider).then(function(result){var _result$user=result.user,displayName=_result$user.displayName,email=_result$user.email,photoURL=_result$user.photoURL;var signedInUser={isSiggnedIn:true,name:displayName,email:email,photo:photoURL};setUser(signedInUser);setLoggedInUser(signedInUser);history.replace(from);}).catch(function(error){var errorCode=error.code;var errorMessage=error.message;console.log(errorCode,errorMessage);});};return/*#__PURE__*/React.createElement(\"div\",{className:\"container-fluid loginContainer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"container w-md-50 mx-auto\"},/*#__PURE__*/React.createElement(\"div\",{className:\"p-5\"},/*#__PURE__*/React.createElement(Link,{to:\"/home\"},/*#__PURE__*/React.createElement(\"img\",{src:\"https://iili.io/27JGwB.png\",style:{width:200},className:\"d-inline-block align-top\",alt:\"\"}))),/*#__PURE__*/React.createElement(\"div\",{className:\"p-5 col-md-6 mx-auto\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:handleSubmit(onSubmit)},newUser&&/*#__PURE__*/React.createElement(\"input\",{name:\"name\",className:\"form-control bg-light\",defaultValue:\"\",ref:register({required:true}),placeholder:\"Name\"}),errors.name&&/*#__PURE__*/React.createElement(\"span\",{className:\"error\"},\"Name is required\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{name:\"email\",type:\"email\",className:\"form-control bg-light\",defaultValue:\"\",ref:register({required:true}),placeholder:\"Email\"}),errors.email&&/*#__PURE__*/React.createElement(\"span\",{className:\"error\"},\"Email is required\"),/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(\"input\",{name:\"password\",type:\"password\",className:\"form-control bg-light\",defaultValue:\"\",ref:register({required:true}),placeholder:\"Password\"}),errors.password&&/*#__PURE__*/React.createElement(\"span\",{className:\"error\"},\"Password is required\"),/*#__PURE__*/React.createElement(\"br\",null),newUser&&/*#__PURE__*/React.createElement(\"input\",{name:\"confirmPassword\",type:\"password\",className:\"form-control bg-light\",defaultValue:\"\",ref:register({required:true}),placeholder:\"Confirm Password\"}),errors.confirmPassword&&/*#__PURE__*/React.createElement(\"span\",{className:\"error\"},\"Confirm Password is required\"),/*#__PURE__*/React.createElement(\"br\",null),newUser?/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-danger text-white\"},\"Sign up\"):/*#__PURE__*/React.createElement(\"button\",{type:\"submit\",className:\"btn btn-danger text-white\"},\"Sign in\"),/*#__PURE__*/React.createElement(\"br\",null),newUser?/*#__PURE__*/React.createElement(Link,{to:\"/login\",onClick:function onClick(){return setNewUser(!newUser);},className:\"text-danger\"},\"Already have an account\"):/*#__PURE__*/React.createElement(Link,{to:\"/login\",onClick:function onClick(){return setNewUser(!newUser);},className:\"text-danger\"},\"Create an account\")),/*#__PURE__*/React.createElement(\"div\",{className:\"\"},/*#__PURE__*/React.createElement(\"h6\",null,\"or \",/*#__PURE__*/React.createElement(\"hr\",null)),/*#__PURE__*/React.createElement(\"div\",{className:\"border rounded p-1 pl-5 pr-5 \"},/*#__PURE__*/React.createElement(\"button\",{onClick:googleSingIn,className:\"btn font-weight-bold text-dark\"},/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"img\",{src:\"https://iili.io/2xw5TQ.png\",alt:\"\",className:\"m-1\",style:{width:16}})),\"Continue with Google\"))))));};export default Login;","map":{"version":3,"sources":["C:/Complete Web Devlopment Batch 2/projects/red-onion-restaurant/src/Components/Login/Login.js"],"names":["React","useState","useForm","Link","useHistory","useLocation","firebase","firebaseConfig","useContext","UserContext","Login","loggedInUser","setLoggedInUser","isSiggnedIn","name","email","photo","user","setUser","history","location","state","from","pathname","register","handleSubmit","errors","newUser","setNewUser","apps","length","initializeApp","onSubmit","data","console","log","googleSingIn","googleProvider","auth","GoogleAuthProvider","signInWithPopup","then","result","displayName","photoURL","signedInUser","replace","catch","error","errorCode","code","errorMessage","message","width","required","password","confirmPassword"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport './Login.css'\r\nimport { useForm } from 'react-hook-form';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport * as firebase from \"firebase/app\";\r\nimport \"firebase/auth\";\r\nimport firebaseConfig from './firebaseConfig';\r\nimport { useContext } from 'react';\r\nimport { UserContext } from '../../App';\r\n\r\nconst Login = () => {\r\n    const [loggedInUser, setLoggedInUser] = useContext(UserContext);\r\n    const [user, setUser] = useState({\r\n        isSiggnedIn: false,\r\n        name: '',\r\n        email: '',\r\n        photo: ''\r\n    })\r\n\r\n    let history = useHistory();\r\n    let location = useLocation();\r\n    let {from} = location.state || { from: {pathname:\"/\"}};\r\n\r\n\r\n    const { register, handleSubmit, errors } = useForm();\r\n    const [newUser, setNewUser] = useState(false);\r\n    \r\n\r\n    if(firebase.apps.length === 0){\r\n        firebase.initializeApp(firebaseConfig);\r\n    }\r\n\r\n    const onSubmit = (data) => {\r\n        console.log(data);\r\n    }\r\n\r\n    const googleSingIn = () => {\r\n        const googleProvider = new firebase.auth.GoogleAuthProvider();\r\n\r\n        firebase.auth().signInWithPopup(googleProvider).then(function(result) {\r\n            const {displayName, email, photoURL} = result.user;\r\n            const signedInUser = {\r\n                isSiggnedIn: true,\r\n                name: displayName,\r\n                email: email,\r\n                photo: photoURL\r\n            }\r\n            setUser(signedInUser);\r\n            setLoggedInUser(signedInUser);\r\n            history.replace(from);\r\n          }).catch(function(error) {\r\n            var errorCode = error.code;\r\n            var errorMessage = error.message;\r\n            console.log(errorCode, errorMessage);\r\n          });\r\n\r\n    }\r\n\r\n    return (\r\n        <div className=\"container-fluid loginContainer\">\r\n            <div className=\"container w-md-50 mx-auto\">\r\n                <div className=\"p-5\">\r\n                    <Link to=\"/home\"><img src=\"https://iili.io/27JGwB.png\" style={{ width: 200 }} className=\"d-inline-block align-top\" alt=\"\" /></Link>\r\n                </div>\r\n                <div className=\"p-5 col-md-6 mx-auto\">\r\n                    <form onSubmit={handleSubmit(onSubmit)}>\r\n\r\n                        {newUser && <input name=\"name\" className=\"form-control bg-light\" defaultValue=\"\" ref={register({ required: true })} placeholder=\"Name\" />}\r\n                        {errors.name && <span className=\"error\">Name is required</span>}\r\n                        <br />\r\n\r\n                        <input name=\"email\" type=\"email\" className=\"form-control bg-light\" defaultValue=\"\" ref={register({ required: true })} placeholder=\"Email\" />\r\n                        {errors.email && <span className=\"error\">Email is required</span>}\r\n                        <br />\r\n\r\n                        <input name=\"password\" type=\"password\" className=\"form-control bg-light\" defaultValue=\"\" ref={register({ required: true })} placeholder=\"Password\" />\r\n                        {errors.password && <span className=\"error\">Password is required</span>}\r\n                        <br />\r\n\r\n                        {newUser && <input name=\"confirmPassword\" type=\"password\" className=\"form-control bg-light\" defaultValue=\"\" ref={register({ required: true })} placeholder=\"Confirm Password\" />}\r\n                        {errors.confirmPassword && <span className=\"error\">Confirm Password is required</span>}\r\n                        <br />\r\n\r\n                        {newUser\r\n                            ? <button type=\"submit\" className=\"btn btn-danger text-white\">Sign up</button>\r\n                            : <button type=\"submit\" className=\"btn btn-danger text-white\">Sign in</button>}\r\n                        <br />\r\n                        {newUser\r\n                            ? <Link to=\"/login\" onClick={() => setNewUser(!newUser)} className=\"text-danger\">Already have an account</Link>\r\n                            : <Link to=\"/login\" onClick={() => setNewUser(!newUser)} className=\"text-danger\">Create an account</Link>}\r\n                    </form>\r\n                    <div className=\"\">\r\n                        <h6>or <hr /></h6>\r\n                        <div className=\"border rounded p-1 pl-5 pr-5 \">\r\n                            <button onClick={googleSingIn} className=\"btn font-weight-bold text-dark\"><span><img src=\"https://iili.io/2xw5TQ.png\" alt=\"\" className=\"m-1\" style={{ width: 16 }} /></span>Continue with Google</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Login;"]},"metadata":{},"sourceType":"module"}